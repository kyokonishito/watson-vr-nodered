[{"id":"83d1af72.ddc02","type":"tab","label":"フロー 2","disabled":false,"info":""},{"id":"41362013.ef48a","type":"function","z":"83d1af72.ddc02","name":"画像とりだし","func":"if (Object.keys(msg.req.body).length == 0){\n    msg.file = msg.req.files[0].buffer;\n} else {\n    msg.file = null;\n}\nmsg.url = msg.req.url;\nmsg.payload = msg.file;\nreturn msg;","outputs":1,"noerr":0,"x":460,"y":280,"wires":[["abb48d43.7c6bc"]]},{"id":"5a969d31.884fc4","type":"http in","z":"83d1af72.ddc02","name":"[POST] /detectFaces","url":"/detectFaces","method":"post","upload":true,"swaggerDoc":"","x":176.99999237060547,"y":139.99999618530273,"wires":[["41362013.ef48a","cd7e3e25.45423"]]},{"id":"371e165a.462f5a","type":"json","z":"83d1af72.ddc02","name":"","property":"payload","action":"str","pretty":true,"x":684.0000267028809,"y":582.0000321865082,"wires":[["d2afa9f4.eca2b8","2eea8fc8.2799f"]]},{"id":"1fee02e5.ad907d","type":"debug","z":"83d1af72.ddc02","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"result","x":1070,"y":280,"wires":[]},{"id":"d2afa9f4.eca2b8","type":"http response","z":"83d1af72.ddc02","name":"http response","x":900,"y":580,"wires":[]},{"id":"2eea8fc8.2799f","type":"debug","z":"83d1af72.ddc02","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":918.9999923706055,"y":514.0000095367432,"wires":[]},{"id":"e86e2428.6e8a38","type":"function","z":"83d1af72.ddc02","name":"parse","func":"msg.payload = msg.result;\nreturn msg;","outputs":1,"noerr":0,"x":507.99999237060547,"y":582.0000019073486,"wires":[["371e165a.462f5a"]]},{"id":"18a997bd.4214b8","type":"http in","z":"83d1af72.ddc02","name":"[POST] /classifyCustomImages","url":"/classifyCustomImages","method":"post","upload":true,"swaggerDoc":"","x":209.97655487060547,"y":390.00000762939453,"wires":[["41362013.ef48a","cd7e3e25.45423"]]},{"id":"c75ea66f.6b7c88","type":"http in","z":"83d1af72.ddc02","name":"[POST] /classifyImages","url":"/classifyImages","method":"post","upload":true,"swaggerDoc":"","x":184.97655487060547,"y":280.0000072729308,"wires":[["41362013.ef48a","cd7e3e25.45423"]]},{"id":"cd7e3e25.45423","type":"debug","z":"83d1af72.ddc02","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"req","x":563.5155982971191,"y":136.27342987060547,"wires":[]},{"id":"abb48d43.7c6bc","type":"switch","z":"83d1af72.ddc02","name":"","property":"url","propertyType":"msg","rules":[{"t":"eq","v":"/classifyImages","vt":"str"},{"t":"eq","v":"/classifyCustomImages","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":649.0078430175781,"y":281.18750762939453,"wires":[["9fc4abf2.7c9308"],["ff947997.c8f5f8"]]},{"id":"9fc4abf2.7c9308","type":"visual-recognition-v3","z":"83d1af72.ddc02","name":"classifyImages","vr-service-endpoint":"https://gateway.watsonplatform.net/visual-recognition/api","image-feature":"classifyImage","lang":"ja","x":840,"y":280,"wires":[["e86e2428.6e8a38","1fee02e5.ad907d"]]},{"id":"ff947997.c8f5f8","type":"function","z":"83d1af72.ddc02","name":"カスタム認識のパラメータ設定","func":"msg.params = {};\n\n// foodにカスタムモデルのIDをセットします。\nmsg.params.classifier_ids = \"YEN_1211194384\";\n\n\n\nmsg.params.threshold = \"0.5\";\nreturn msg;","outputs":1,"noerr":0,"x":594.9765548706055,"y":393.00003814697266,"wires":[["f95f5f32.261b2"]]},{"id":"f95f5f32.261b2","type":"visual-recognition-v3","z":"83d1af72.ddc02","name":"Detect Custom","image-feature":"classifyImage","lang":"ja","x":852.9766159057617,"y":394.0000054836273,"wires":[["e86e2428.6e8a38","1fee02e5.ad907d"]]}]